{"version":3,"sources":["stickyState.ts","Schedule.tsx","Schedules.tsx","App.tsx","index.tsx"],"names":["useStickyState","defaultValue","key","React","useState","stickyValue","window","localStorage","getItem","JSON","parse","value","setValue","useEffect","setItem","stringify","Schedule","props","id","showPopup","setShowPopup","complementaryHue","hue","className","style","backgroundColor","color","onClick","title","date","fromNow","withTitle","local","description","htmlFor","type","onChange","event","target","rows","moment","format","console","log","toISOString","onDelete","Schedules","orderBy","ids","filter","i","removeItem","items","map","item","data","newID","uuidv4","Date","now","Math","random","concat","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.51e2b7e8.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\n/**\r\n * \r\n * @param defaultValue Default value to store\r\n * @param key The local storage key\r\n * @returns value and setValue as per React.useState\r\n */\r\nexport function useStickyState<T>(defaultValue: T, key: string): [T, React.Dispatch<T>] {\r\n    const [value, setValue] = React.useState(() => {\r\n      const stickyValue = window.localStorage.getItem(key);\r\n      return stickyValue !== null\r\n        ? JSON.parse(stickyValue)\r\n        : defaultValue;\r\n    });\r\n    \r\n    React.useEffect(() => {\r\n      window.localStorage.setItem(key, JSON.stringify(value));\r\n    }, [key, value]);\r\n    \r\n    return [value, setValue];\r\n  }","import React, { useState } from \"react\";\r\nimport \"./Generic.scss\";\r\nimport { useStickyState } from \"./stickyState\";\r\nimport Moment from \"react-moment\";\r\nimport moment from \"moment\";\r\n\r\nexport interface ScheduleData {\r\n    id: string,\r\n    title: string,\r\n    description: string,\r\n    date: string,\r\n    hue: number\r\n}\r\n\r\nexport interface ScheduleProps extends ScheduleData {\r\n    onDelete?: (id: string) => void\r\n}\r\n\r\nexport default function Schedule(props: ScheduleProps) {\r\n    let [value, setValue] = useStickyState<ScheduleData>(props, props.id);\r\n    let [showPopup, setShowPopup] = useState(false);\r\n\r\n    let onTitleChange = (event: any) => {\r\n        setValue({\r\n            ...value,\r\n            title: event.target.value\r\n        })\r\n    }\r\n\r\n    let onDescriptionChange = (event: any) => {\r\n        setValue({\r\n            ...value,\r\n            description: event.target.value,\r\n        })\r\n    }\r\n\r\n    let onDateChange = (event: any) => {\r\n        console.log(value.date, event.target.value);\r\n        if (!event.target.value) return;\r\n        setValue({\r\n            ...value,\r\n            date: moment(event.target.value + \" \" + moment(value.date).format(\"HH:MM:SS\")).toISOString()\r\n        })\r\n    }\r\n\r\n    let onTimeChange = (event: any) => {\r\n        console.log(value.date, event.target.value);\r\n        if (!event.target.value) return;\r\n        setValue({\r\n            ...value,\r\n            date: moment(moment(value.date).format(\"YYYY/MM/DD\") + \" \" + event.target.value).toISOString()\r\n        })\r\n    }\r\n\r\n    let complementaryHue = (value.hue + 140) % 360;\r\n    return (\r\n        <div className=\"Schedule\" style={{backgroundColor: \"hsl(\" + value.hue + \", 50%, 90%)\", color: \"hsl(\" + complementaryHue + \", 50%, 50%)\"}}>\r\n            <div className=\"Info\" onClick={() => {setShowPopup(!showPopup)}}>\r\n                <div className=\"MainBar\">\r\n                    <div className=\"Title\">\r\n                        {value.title}\r\n                    </div>\r\n                    <div className=\"Countdown\">\r\n                        <Moment date={value.date} fromNow withTitle></Moment>\r\n                    </div>\r\n                </div>\r\n                <div className=\"InfoBar\">\r\n                    <div className=\"Date\">\r\n                        <Moment date={value.date} local></Moment>\r\n                    </div>\r\n\r\n                    <div className=\"Description\">\r\n                        {value.description}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {showPopup ?\r\n                <div className=\"EditSection\">\r\n                    <div className=\"Field\">\r\n                        <label htmlFor=\"title\" className=\"FieldTitle\">Title</label>\r\n                        <input type=\"text\" className=\"FieldInput\" defaultValue={value.title} onChange={onTitleChange}/>\r\n                    </div>\r\n                    <div className=\"Field\">\r\n                        <label htmlFor=\"description\" className=\"FieldTitle\">Description</label>\r\n                        <textarea rows={10} className=\"FieldInput\" defaultValue={value.description} onChange={onDescriptionChange}/>\r\n                    </div>\r\n                    <div className=\"Field\">\r\n                        <label htmlFor=\"date\" className=\"FieldTitle\">Date and time</label>\r\n                        <input type=\"date\" className=\"FieldInput\" defaultValue={moment(value.date).format(\"YYYY-MM-DD\")} onChange={onDateChange}/>\r\n                        <input type=\"time\" className=\"FieldInput\" defaultValue={moment(value.date).format(\"HH:MM:SS\")} onChange={onTimeChange}/>\r\n                    </div>\r\n                    <div className=\"Field\">\r\n                        <label className=\"FieldTitle\">Danger zone</label>\r\n                        <button className=\"FieldInput FieldInput--red\" onClick={() => {if (props.onDelete) props.onDelete(value.id)}}>Delete</button>\r\n                    </div>\r\n                </div>\r\n            : null}\r\n        </div>\r\n    );\r\n}","import React from \"react\";\r\nimport Schedule from \"./Schedule\";\r\nimport { useStickyState } from \"./stickyState\";\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport \"./Generic.scss\";\r\nimport moment from \"moment\";\r\n\r\ninterface IndexData {\r\n    orderBy: \"endDate\" | \"id\" | \"title\",\r\n    ids: string[]\r\n}\r\n\r\nexport default function Schedules() {\r\n    let [value, setValue] = useStickyState<IndexData>({ orderBy: \"endDate\", ids: [] }, \"index\");\r\n\r\n    // Check valid IDs\r\n    // setValue({\r\n    //     orderBy: value.orderBy,\r\n    //     ids: value.ids.filter(i => localStorage.getItem(i) !== null)\r\n    // });\r\n\r\n    let onDelete = (id: string) => {\r\n        setValue({\r\n            orderBy: value.orderBy,\r\n            ids: value.ids.filter(i => i !== id)\r\n        });\r\n\r\n        localStorage.removeItem(id);\r\n    };\r\n\r\n    let handleClick = () => {\r\n        let newID = uuidv4();\r\n        localStorage.setItem(newID, JSON.stringify({\r\n            id: newID,\r\n            title: \"My new event\",\r\n            description: \"Put something here, or keep it empty\",\r\n            date: moment(Date.now()).toISOString(),\r\n            hue: 360 * Math.random()\r\n        }))\r\n        \r\n        setValue({\r\n            orderBy: value.orderBy,\r\n            ids: value.ids.concat([newID])\r\n        });\r\n    }\r\n\r\n    const items = value.ids.map((item) => {\r\n        const data = JSON.parse(localStorage.getItem(item)!);\r\n        return <Schedule {...data} onDelete={onDelete} key={data.id}/>\r\n    });\r\n\r\n    console.log(items);\r\n\r\n    return (\r\n        <div>\r\n            <div>{items}</div>\r\n            <div className=\"AddButton\" onClick={handleClick}>+</div>\r\n        </div>\r\n    );\r\n}","import React from 'react';\nimport \"./Generic.scss\";\nimport Schedules from './Schedules';\n\nfunction App() {\n  return (\n    <div>\n      <header>\n        <div className=\"Header\">\n          <div className=\"Main\">\n            Scheduler\n          </div>\n          <div className=\"Description\">\n            Define a list of times to look forward to!\n          </div>\n        </div>\n      </header>\n      <div>\n        <Schedules></Schedules>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}